<!DOCTYPE html>
<html>

<head>
    <title>XtreMetrics - Profile</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/profile.css">
</head>

<body>
    <div class="topnav">
        <div class="logo">
            <img id="logo-img" src="/img/X-icon.png" />
            <span id="logo">TREMETRICS</span>
        </div>
        <a class="active" href="/logout"><span>LogOut</span></a>
        <a class="active" href="/user/delete"><span>Delete account</span></a>
    </div>
    <%if(err === undefined && msg === undefined){ %>
        <div class="title">
            <span id="title">Welcome <span class="txt-highlight"><%= userName %></span> ! </span>
        </div>
        <% } %>
            <section class="header-option">
                <div class="profile">
                    <div id="profile" class="header">Profile</div>
                </div>
                <div class="metrics">
                    <div id="metrics" class="header">Metrics</div>
                </div>
            </section>
            <%if(err && msg !== undefined){ %>
                <section class="msg-error">
                    <div class="msg-error-txt">
                        <%= msg %>
                    </div>
                </section>
                <% } else if(!err && msg !== undefined) {%>
                    <section class="msg-success">
                        <div class="msg-success-txt">
                            <%= msg %>
                        </div>
                    </section>
                    <% } %>
                        <section class="option">
                            <div class="profile-form">
                                <form class="form-info" action="/user/<%= userName %>/profile" method="post">
                                    <div class="form-title" id="form-title-white"><span class="form-title-txt">Edit your profile</span></div>
                                    <div class="form-element">
                                        <img id="reverse-ico" class="form-ico" src="/img/email.png" />
                                        <input type="mail" id="mail" name="user_mail" placeholder="Enter your e-mail" value="<%= userEmail %>" required>
                                    </div>
                                    <div class="form-element">
                                        <img id="reverse-ico" class="form-ico" src="/img/user.png" />
                                        <input type="text" id="name" name="user_name" placeholder="Enter your username" value="<%= userName %>" required>
                                    </div>
                                    <div class="form-element" id="hover">
                                        <img id="reverse-ico" class="form-ico" src="/img/psw.png" />
                                        <input type="password" id="password" name="user_password" placeholder="Enter your password" value="<%= userPassword %>" required>
                                    </div>
                                    <button id="form-button-profile" type="submit" class="form-submit">Save</button>
                                </form>
                            </div>
                            <div class="metrics-action">
                                <div class="form-info">
                                    <div class="form-title" id="form-title-black"><span class="form-title-txt">Action on metrics</span></div>
                                    <div class="list-button">
                                        <button title="Display options metrics" class="btn-choice" id="btn-settings"></button>
                                        <button title="Create metric" class="btn-choice" id="btn-create"></button>
                                        <button title="Read metric" class="btn-choice" id="btn-read"></button>
                                        <button title="Update metric" class="btn-choice" id="btn-update"></button>
                                        <button title="Delete metric" class="btn-choice" id="btn-delete"></button>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section class="option-metrics">
                            <div class="metrics-create" id="option-metrics-create">
                                <div class="form-info">
                                    <div class="form-title" id="form-title-black"><span class="form-title-txt">Create metrics</span></div>
                                </div>
                            </div>
                        </section>
                        <section class="option-metrics">
                            <div class="metrics-read" id="option-metrics-read">
                                <div class="form-info">
                                    <div class="form-title" id="form-title-black"><span class="form-title-txt">Read metrics</span></div>
                                </div>
                            </div>
                        </section>
                        <section class="option-metrics">
                            <div class="metrics-update" id="option-metrics-update">
                                <div class="form-info">
                                    <div class="form-title" id="form-title-black"><span class="form-title-txt">Update metrics</span></div>
                                </div>
                            </div>
                        </section>
                        <section class="option-metrics">
                            <div class="metrics-delete" id="option-metrics-delete">
                                <div class="form-info">
                                    <div class="form-title" id="form-title-black"><span class="form-title-txt">Delete metrics</span></div>
                                </div>
                            </div>
                        </section>


                        <script>
                            $(document).ready(function() {
                                $(".title").fadeTo(5000, 0.001, function() {
                                    $(this).slideUp(500, function() {
                                        $(this).remove();
                                    });
                                });
                                $("#password").click(function() {
                                    if ($(this).attr("type") === 'password') {
                                        $(this).prop("type", "text");
                                        $(this).css("background-image", "url(../img/visibility.png)");
                                    } else {
                                        $(this).prop("type", "password");
                                        $(this).css("background-image", "url(../img/no-visibility.png)");
                                    }
                                });
                                $(".profile").click(function() {
                                    $('.metrics').toggle(500);
                                    $('.profile-form').toggle(500);
                                });
                                $(".metrics").click(function() {
                                    $('.profile').toggle(500);
                                    $('.metrics-action').toggle(500);
                                });
                                $(".msg-error").fadeTo(6000, 5, function() {
                                    $(this).slideUp(500, function() {
                                        $(this).remove();
                                    });
                                });
                                $(".msg-success").fadeTo(6000, 5, function() {
                                    $(this).slideUp(500, function() {
                                        $(this).remove();
                                    });
                                });
                                $("#btn-settings").click(function() {
                                    $("#btn-settings").toggleClass("rotate");
                                    $(".metrics-create").hide("slow");
                                    $(".metrics-read").hide("slow");
                                    $(".metrics-update").hide("slow");
                                    $(".metrics-delete").hide("slow");
                                });
                                $("#btn-settings").click(function() {
                                    $('#btn-create').toggle(500);
                                    $('#btn-read').toggle(500);
                                    $('#btn-update').toggle(500);
                                    $('#btn-delete').toggle(500);
                                });

                                $("#btn-create").click(function() {
                                    $(".metrics-create").toggle(500);
                                });
                                $("#btn-read").click(function() {
                                    $(".metrics-read").toggle(500);
                                });
                                $("#btn-update").click(function() {
                                    $(".metrics-update").toggle(500);
                                });
                                $("#btn-delete").click(function() {
                                    $(".metrics-delete").toggle(500);
                                });

                            });
                        </script>
</body>

</html>